import {Command} from 'commander';
import {defaultCommandHandler} from './commands/default.command';
import {validateCommandHandler} from './commands/validate.command';

const program = new Command();

program
    .version('1.0.0')
    .description('OpenTest CLI')
    .option('-d, --debug', 'output extra debugging');

program
    .command('test')
    .description('Test an OpenAPI specification')
    .requiredOption('-s, --spec <string>', 'OpenAPI specification file path')
    .requiredOption('-i, --input <string>', 'OpenAPI tests file path')
    .option('-o, --output <string>', 'Output file path')
    .option('-f, --format <string>', 'Output format (console, json)')
    .action(defaultCommandHandler);

program
    .command('validate')
    .description('Validate a OpenAPI test JSON file')
    .requiredOption('-i, --input <string>', 'OpenAPI test file path')
    .action(validateCommandHandler)

program.parse(process.argv);
